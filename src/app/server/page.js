import { cookies } from "next/headers";

export const metadata = {
  title: "Server Side",
  description: "Generated by Next.js",
};

const Server = async () => {
  const res = await fetch(
    `${process.env.NEXT_APP_BASE_URL}/api/v1/product/polls/AppProductSearch/search/?keyword=Best%20Deals&limit=5&offset=0`,
    { cache: "no-store" }
  );
  const data = await res.json();
  const cookieStore = cookies();
  //console.log(cookieStore.get("test"));
  //console.log(process.env.NEXT_APP_BASE_URL);

  return (
    <main>
      <h1>Server Side Render Without Caching</h1>
      <div>Product Details</div>
      <ul>
        {data && data.products.map((d) => <li key={d.id}>{d.product_name}</li>)}
      </ul>
    </main>
  );
};

export default Server;
